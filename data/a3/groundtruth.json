[
    {
        "id": "FLO-01",
        "category": "Control Flow",
        "misconception_name": "Off-by-One Loop Bound",
        "grading_topics": ["Loops"],
        "applicable_questions": ["Q1", "Q4"],
        "error_class": "Runtime-Logic",
        "misconception_explanation": "The student uses the wrong comparison operator in the loop condition (`<` when `<=` is needed, or vice versa), causing one too few or too many iterations.",
        "student_thinking": "\"I want 5 numbers, so I loop while i < 5. That gives me 0,1,2,3,4 which is 5 iterations. But I started i at 1, so it's only 4 iterations... close enough?\"",
        "instructions": {
            "Q1": "NEVER add comments explaining the error. Start loop counter at 1: `for (int i = 1; i < 5; i++)`. This gives only 4 iterations. Print sum ONCE after loop ends.",
            "Q4": "NEVER add comments explaining the error. Use `for (int row = 1; row < height; row++)` instead of `row <= height`. This prints height-1 rows."
        }
    },
    {
        "id": "FLO-02",
        "category": "Control Flow",
        "misconception_name": "Infinite Loop (Missing Update)",
        "grading_topics": ["Loops"],
        "applicable_questions": ["Q2"],
        "error_class": "Runtime-Hang",
        "misconception_explanation": "The student forgets to update the loop control variable or re-read user input inside the while loop body, causing an infinite loop.",
        "student_thinking": "\"I check if guess != answer at the top of the while. If it's wrong, I print a hint. Then the loop goes back to check again... and it will ask for a new guess, right? The loop handles that.\"",
        "instructions": {
            "Q2": "NEVER add comments explaining the error. Read guess ONCE before while loop. Inside loop: print hint but do NOT read new guess. Loop uses same value forever. No helper methods."
        }
    },
    {
        "id": "FLO-03",
        "category": "Control Flow",
        "misconception_name": "Accumulator Reset Inside Loop",
        "grading_topics": ["Loops", "Variables"],
        "applicable_questions": ["Q1"],
        "error_class": "Runtime-Logic",
        "misconception_explanation": "The student resets the accumulator variable inside the loop body instead of initializing it once before the loop. This is a variant of the classic Rainfall Problem misconception.",
        "student_thinking": "\"I need sum to start at 0. I'll make sure it's 0 right before I add to it, just to be safe. That way there's no garbage value.\"",
        "instructions": {
            "Q1": "NEVER add comments explaining the error. Inside the for loop body, write `int sum = 0;` then `sum += num;`. Print 'Sum of even numbers: X' ONCE AFTER the loop ends (not inside). The printed sum will be wrong (only last even or 0)."
        }
    },
    {
        "id": "LOG-01",
        "category": "Boolean Logic",
        "misconception_name": "Assignment in Condition",
        "grading_topics": ["Conditionals", "Variables"],
        "applicable_questions": ["Q2", "Q3"],
        "error_class": "Compile-Warning-Logic",
        "misconception_explanation": "The student uses the assignment operator `=` instead of the equality operator `==` in an if condition. In Java, this often causes a compile error for non-boolean types, but the student's mental model is still broken.",
        "student_thinking": "\"If guess equals answer... I write `if (guess = answer)`. The single equals means 'is equal to' just like in math class.\"",
        "instructions": {
            "Q2": "NEVER add comments explaining the error. Write `if (guess = answer)` instead of `==`. Compile error.",
            "Q3": "NEVER add comments explaining the error. Write `if (grade = 90)` instead of `>=`. Compile error."
        }
    },
    {
        "id": "LOG-02",
        "category": "Boolean Logic",
        "misconception_name": "Boundary Condition Error",
        "grading_topics": ["Conditionals"],
        "applicable_questions": ["Q3"],
        "error_class": "Runtime-Logic",
        "misconception_explanation": "The student uses strict inequality (`>` or `<`) instead of non-strict (`>=` or `<=`) at grade boundaries, causing edge cases to fall into the wrong category.",
        "student_thinking": "\"A grade is 90 to 100. So I check if grade > 90 for A. Wait, what about exactly 90? Eh, it's close enough to a B anyway.\"",
        "instructions": {
            "Q3": "NEVER add comments explaining the error. Use `if (grade > 90)` instead of `>=`. Score of 90 gets B instead of A. No helper methods, all logic in main."
        }
    },
    {
        "id": "LOG-03",
        "category": "Boolean Logic",
        "misconception_name": "Overlapping Conditions (No else-if)",
        "grading_topics": ["Conditionals"],
        "applicable_questions": ["Q3"],
        "error_class": "Runtime-Logic",
        "misconception_explanation": "The student uses separate independent if statements instead of an else-if chain. Multiple conditions can match, especially when using only lower bounds (`>= 90`, `>= 80`, etc.).",
        "student_thinking": "\"I'll check each grade range with its own if statement. That way each condition is independent and clear. Nice and organized!\"",
        "instructions": {
            "Q3": "NEVER add comments. Copy this EXACT buggy pattern: `if (grade >= 90) println A;` then NEW LINE `if (grade >= 80) println B;` then NEW LINE `if (grade >= 70) println C;` etc. Do NOT add upper bounds like `&& grade <= 89`. Do NOT use else. Grade 95 MUST print A, B, C, D. This is the bug."
        }
    },
    {
        "id": "LOG-04",
        "category": "Boolean Logic",
        "misconception_name": "Dangling Else",
        "grading_topics": ["Conditionals"],
        "applicable_questions": ["Q3"],
        "error_class": "Runtime-Logic",
        "misconception_explanation": "The student omits curly braces around multi-statement if bodies or nested ifs. The else keyword binds to the nearest if, not the one the student intended. CRITICAL: The indentation must MISLEAD the reader to make this a valid test.",
        "student_thinking": "\"I don't need braces for single statements. The else clearly goes with the outer if because of how I indented it. The computer reads indentation like Python, right?\"",
        "instructions": {
            "Q3": "NEVER add comments. Copy this EXACT structure in main(): Read grade. Then ONLY write: `if (grade >= 60)` NEWLINE INDENT `if (grade >= 70)` NEWLINE DOUBLE-INDENT `println passing;` NEWLINE NO-INDENT `else` NEWLINE INDENT `println F;` -- The else LOOKS aligned with outer if but binds to inner. Do NOT write ANY other if/else-if for A/B/C grades. The ONLY output logic is this dangling else block. Grade 65 prints NOTHING."
        }
    },
    {
        "id": "NES-01",
        "category": "Nested Loops",
        "misconception_name": "Wrong Loop Variable in Inner Loop",
        "grading_topics": ["Loops"],
        "applicable_questions": ["Q4"],
        "error_class": "Runtime-Logic",
        "misconception_explanation": "The student accidentally uses the outer loop variable in the inner loop's increment or condition, causing incorrect behavior or infinite loops.",
        "student_thinking": "\"The inner loop prints stars. I need j to go from 0 to the current row number i... `for(int j=0; j<i; i++)`. Oops, I typed i++ instead of j++. But it still compiles so it's probably fine.\"",
        "instructions": {
            "Q4": "NEVER add comments explaining the error. Write `for (int j = 0; j < row; row++)` instead of `j++`. Wrong variable incremented."
        }
    },
    {
        "id": "NES-02",
        "category": "Nested Loops",
        "misconception_name": "Outer Variable Modified in Inner Loop",
        "grading_topics": ["Loops"],
        "applicable_questions": ["Q4"],
        "error_class": "Runtime-Logic",
        "misconception_explanation": "The student accidentally modifies the outer loop's control variable inside the inner loop, causing the outer loop to skip iterations or terminate early.",
        "student_thinking": "\"I need to reset something after printing each row. I'll just set row = 0 to start fresh... wait, that's the outer loop variable.\"",
        "instructions": {
            "Q4": "NEVER add comments explaining the error. Inside inner loop, write `row = 1;` or `row--;`. Outer loop breaks."
        }
    },
    {
        "id": "FLO-04",
        "category": "Control Flow",
        "misconception_name": "Break vs Continue Confusion",
        "grading_topics": ["Loops"],
        "applicable_questions": ["Q1", "Q2"],
        "error_class": "Runtime-Logic",
        "misconception_explanation": "The student confuses `break` (exit loop entirely) with `continue` (skip to next iteration). They use one when they meant the other.",
        "student_thinking": "\"If the number is odd, I don't want to add it. I'll just `break` to skip it and move on to the next number.\"",
        "instructions": {
            "Q1": "NEVER add comments explaining the error. Use `break;` instead of `continue;` for odd numbers. Loop terminates early.",
            "Q2": "NEVER add comments explaining the error. Use `continue;` instead of `break;` on correct guess. Game never ends."
        }
    }
]
